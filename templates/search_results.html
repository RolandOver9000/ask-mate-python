{% extends 'layout.html' %}
{% block head %}
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='search.css') }}">
    {{ super() }}
{% endblock %}
{% block title %}Search results{% endblock %}
{% block content %}
    <a href="{{ url_for('route_index') }}" class="back-to-main" id="list-page">&#x2B05; Return to main page</a>
    <h1>Search results</h1>
    <h3>Questions containing search phrase '{{ search_phrase }}':</h3>
    {% if not questions and not answers %}
        <div>No results.</div>
    {% endif %}
    {% if questions %}
    {% for question in questions %}
        <div>Question ID: {{ question.id }}</div>
        <div>{{ question.title|safe }}</div>
        {% if search_phrase|lower in question.message|lower %}
            <div>{{ question.message|safe }}</div>
        {% endif %}
        {% for answer in answers %}
            {% if answer.question_id == question.id %}
                <div>Answer ID: {{ answer.id }}</div>
                <div>{{ answer.message|safe }}</div>
            {% endif %}
        {% endfor %}
    {% endfor %}
    {% endif %}
    {% if answers %}
    {% for answer in answers %}
        {% if search_phrase not in answer.q_title and search_phrase not in answer.q_message %}
            <div>Question ID: {{ answer.question_id }}</div>
            <div>{{ answer.q_title }}</div>
            <div>Answer ID: {{ answer.id }}</div>
            <div>{{ answer.message|safe }}</div>
        {% endif %}
    {% endfor %}
    {% endif %}
{% endblock %}
