{% extends 'layout.html' %}
{% block head %}
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='search_results.css') }}">
    {{ super() }}
{% endblock %}
{% block title %}Search results{% endblock %}
{% block content %}
    <a href="{{ url_for('route_index') }}" class="back-to-main">&#x2B05; Return to main page</a>
    <h1>Search results</h1>
    <h3>Questions containing search phrase '{{ search_phrase }}':</h3>
    {% if questions %}
    <div id="questions-container">
    {% for question in questions %}
        <div class="q-container">
            <div class="q-title">
                <span class="label">Question title: </span>
                <a class="text-value" href="{{ url_for('display_question_and_answers', question_id=question.id) }}">
                    {% for substring in question.title %}{% if search_phrase|lower == substring|lower %}
                        <em>{{ substring }}</em>{% else %}<span>{{ substring }}</span>
                    {% endif %}{% endfor %}
                </a>
            </div>
            <div class="q-id">
                <span class="label">ID: </span>
                <span class="text-value">{{ question.id }}</span>
            </div>
            <div class="q-message">
                <span class="label">Message: </span>
                {% if question.message %}
                    <span class="text-value">
                        {% for substring in question.message %}{% if search_phrase|lower == substring|lower %}
                            <em>{{ substring }}</em>{% else %}<span>{{ substring }}</span>
                        {% endif %}{% endfor %}
                    </span>
                {% endif %}
            </div>
            {% if question.answers %}
            <div class="answers-container">
                {% for answer in question.answers %}
                    <div class="a-container">
                        <div class="a-id">
                            <span class="label">Answer ID: </span>
                            <span class="text-value">{{ answer.id }}</span>
                        </div>
                        <div class="a-message">
                            <span class="label">Message: </span>
                            <span class="text-value">
                                {% for substring in answer.message %}{% if search_phrase|lower == substring|lower %}
                                    <em>{{ substring }}</em>{% else %}<span>{{ substring }}</span>
                                {% endif %}{% endfor %}
                            </span>
                        </div>
                    </div>
                {% endfor %}
            </div>
            {% endif %}
        </div>
    {% endfor %}
    </div>
    {% endif %}
{% endblock %}